
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://checkroth.com/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://checkroth.com/theme/pygments/colorful.min.css">
  <link rel="stylesheet" type="text/css" href="https://checkroth.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://checkroth.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://checkroth.com/theme/font-awesome/css/solid.css">

    <link href="https://checkroth.com/static/custom.css" rel="stylesheet">




<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-136401999-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#FFFFFF">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#FFFFFF">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#FFFFFF">

<meta name="author" content="Charles Heckroth" />
<meta name="description" content="This blog is a simple static site running on a computer in my home. My domain from namecheap is pointing to the public IP of my home router. Aside from this static site, some other things are accessible through my domain name, various private projects, slack webhooks, grafana, etc. This …" />
<meta name="keywords" content="linux, ubuntuserver, selfhosting, nginx">

<meta property="og:site_name" content="software-and-stuff"/>
<meta property="og:title" content="Pointing a Domain to a Self-hosted Server"/>
<meta property="og:description" content="This blog is a simple static site running on a computer in my home. My domain from namecheap is pointing to the public IP of my home router. Aside from this static site, some other things are accessible through my domain name, various private projects, slack webhooks, grafana, etc. This …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://checkroth.com/drafts/pointing-domain-to-server.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-05-08 00:00:00+09:00"/>
<meta property="article:modified_time" content="2021-05-08 00:00:00+09:00"/>
<meta property="article:author" content="https://checkroth.com/author/charles-heckroth.html">
<meta property="article:section" content="blog"/>
<meta property="article:tag" content="linux"/>
<meta property="article:tag" content="ubuntuserver"/>
<meta property="article:tag" content="selfhosting"/>
<meta property="article:tag" content="nginx"/>
<meta property="og:image" content="/images/me2.jpeg">

  <title>software-and-stuff &ndash; Pointing a Domain to a Self-hosted Server</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-3090577057275093",
      enable_page_level_ads: true
    });
  </script>
</head>
<body>
  <aside>
    <div>
      <a href="https://checkroth.com">
        <img src="/images/me2.jpeg" alt="Charles Henry Heckroth" title="Charles Henry Heckroth">
      </a>
      <h1><a href="https://checkroth.com">Charles Henry Heckroth</a></h1>

<p>My Notes & Blog</p>
      <nav>
        <ul class="list">
          <li><a href="https://checkroth.com/pages/about-me.html">About Me</a></li>
          <li><a href="https://checkroth.com/pages/strava-runmap.html">Strava Runmap</a></li>

          <li><a href="https://checkroth.com/category/blog.html" target="_blank">Blog</a></li>
          <li><a href="https://drive.google.com/file/d/1T80kxtu-rTTqWSHAqkLZAsEqcBnmXwFK/view?usp=sharing" target="_blank">Resume</a></li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-envelope" href="mailto:checkroth@gmail.com" target="_blank">
            <i class="fas fa-envelope">
            </i>
          </a></li>
          <li>
            <a  class="sc-github" href="https://www.github.com/Checkroth" target="_blank">
            <i class="fab fa-github">
            </i>
          </a></li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/charlesheckroth" target="_blank">
            <i class="fab fa-linkedin">
            </i>
          </a></li>
          <li>
            <a  class="sc-twitter" href="http://www.twitter.com/checkroth" target="_blank">
            <i class="fab fa-twitter">
            </i>
          </a></li>
          <li>
            <a  class="sc-stack-overflow" href="https://stackoverflow.com/users/1037971/charles" target="_blank">
            <i class="fab fa-stack-overflow">
            </i>
          </a></li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="ca-pub-3090577057275093"
           data-ad-slot="7734708573"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

  </aside>
  <main>

    <nav>
      <a href="https://checkroth.com">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


    </nav>

<article class="single">
  <header>
      
    <h1 id="pointing-domain-to-server">Pointing a Domain to a Self-hosted Server</h1>
    <p>
          Posted on May 08, 2021 in <a href="https://checkroth.com/category/blog.html">blog</a>


    </p>
  </header>


  <div>
    <p>This blog is a simple static site running on a computer in my home.</p>
<p>My domain from <a href="https://www.namecheap.com/">namecheap</a> is pointing to the public IP of my home router.</p>
<p>Aside from this static site, some other things are accessible through my domain name, various private projects, slack webhooks, grafana, etc.</p>
<p>This post is a guide to setting this up, using:</p>
<ul>
<li>Namecheap (or any domain provider, but my specific setup is with namecheap)</li>
<li>Nginx (for running multiple services behind the same domain)</li>
<li>letsencrypt for SSL</li>
</ul>
<h1 id="network-setup">Network Setup</h1>
<h2 id="finding-your-private-and-public-ip">Finding your Private and Public IP</h2>
<p>Same process as outlined <a href="{filename}/2021-4-27-setting-up-a-self-hosted-server.md">in the private server setup</a></p>
<h3 id="private"><a href="#private">private</a></h3>
<p>run <code>ifconfig</code>.</p>
<p>Ignore entires like <code>127.0.0.1</code></p>
<p>Your private network IP address should be something like <code>192.168.1.123</code>.</p>
<h3 id="public"><a href="#public">public</a></h3>
<p>Your public IP address will be necessary for a lot of things, most notable the following "Going Remote" step.</p>
<p>It can be surprisingly difficult to find your outgoing IPV4 address through cli tools, depending on your router/modem setup.</p>
<p>Just hit <code>curl https://ipinfo.io/ip</code> to get your public IP.</p>
<h2 id="port-forwarding_1">Port Forwarding</h2>
<p>You want to make sure your router is forwarding port 80 and 443 to the private IP found above. The process for this is different for every router.</p>
<p>Even if you don't want port 80 forwarded, you will need it at first to get SSL set up.</p>
<h2 id="configuring-your-domain">Configuring your Domain</h2>
<p>This step largely depends on your domain provider.</p>
<p>Following the steps for whever you get your domain, make an A record pointing to the <em>public</em> IP from above.</p>
<h2 id="setting-up-letsencrypt">Setting up LetsEncrypt</h2>
<p>Basically just <a href="https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/">this nginx post</a>.</p>
<p>Install certbot and the nginx plugin.</p>
<div class="highlight"><pre><span></span>apt-get update
sudo apt-get install certbot
apt-get install python3-certbot-nginx
</pre></div>
<p>Make sure nginx is listening to port 80 on your domain name.</p>
<div class="highlight"><pre><span></span><span class="n">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">listen</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">default_server</span><span class="p">;</span>
<span class="w">    </span><span class="n">listen</span><span class="w"> </span><span class="p">[::]:</span><span class="mi">80</span><span class="w"> </span><span class="n">default_server</span><span class="p">;</span>
<span class="w">    </span><span class="n">root</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="p">;</span>
<span class="w">    </span><span class="n">server_name</span><span class="w"> </span><span class="n">mydopeserver</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">www</span><span class="o">.</span><span class="n">mydopeserver</span><span class="o">.</span><span class="n">com</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h1 id="nginx-web-setup_1">Nginx / Web Setup</h1>
<h2 id="with-letsencrypt">With letsencrypt</h2>
<h2 id="pointing-to-a-static-site">Pointing to a static site</h2>
<h2 id="reverse-proxies-for-other-stuff">Reverse proxies for other stuff</h2>
<h2 id="ssl-for-grafana">SSL for Grafana</h2>
<p>If you want to access grafana behind your nginx reverse proxy, through your domain name, over SSL, you will need to do some configuration on grafana itself.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://checkroth.com/tag/linux.html">linux</a>
      <a href="https://checkroth.com/tag/ubuntuserver.html">ubuntuserver</a>
      <a href="https://checkroth.com/tag/selfhosting.html">selfhosting</a>
      <a href="https://checkroth.com/tag/nginx.html">nginx</a>
    </p>
  </div>




    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-3090577057275093"
         data-ad-slot="6895080254"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'checkroth';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>
  &copy;  2021 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " software-and-stuff ",
  "url" : "https://checkroth.com",
  "image": "/images/me2.jpeg",
  "description": "Blog and info"
}
</script>

</body>
</html>